(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["search"],{4604:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"product",staticClass:"search"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.$store.state.loadshow,expression:"!$store.state.loadshow"}],staticClass:"postlist"},e._l(e.posts,(function(t){return s("div",{key:t.id,staticClass:"card"},[t&&t.bot?s("div",[s("div",{ref:"loadmore",refInFor:!0,staticClass:"loadmore"})]):s("div",[s("div",{staticClass:"title"},[s("img",{staticClass:"profile",staticStyle:{"border-radius":"50%"},attrs:{src:e.cloudinaryURL+t.username+".jpg",alt:"user img",width:"25",height:"25"}}),s("div",{staticClass:"profile"},[e._v(e._s(t.username))]),s("img",{staticClass:"dot",attrs:{src:r("0726"),alt:""},on:{click:function(r){return e.menu(t)}}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.menu,expression:"post.menu"}],staticClass:"menu"},[s("div",{staticClass:"xyz",on:{click:function(r){return e.btnsub("/user/follow",t.username)}}},[e._v("Subscribe")]),s("div",{staticClass:"xyz",on:{click:function(r){return e.btnsub("/user/block",t.username)}}},[e._v("Block")])]),s("div",{staticClass:"pic"},[s("img",{staticStyle:{width:"100%",height:"300px"},attrs:{src:t.path,alt:"user post"}})]),s("div",{staticClass:"iconlist"},[s("img",{directives:[{name:"show",rawName:"v-show",value:!t.heart,expression:"!post.heart"}],staticClass:"icon",attrs:{src:r("626a"),alt:"share",width:"20",height:"20"},on:{click:function(r){return e.like(t)}}}),e._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:t.heart,expression:"post.heart"}],staticClass:"icon",attrs:{src:r("077f"),alt:"share",width:"20",height:"20"},on:{click:function(r){return e.like(t)}}}),s("div",{staticClass:"icon"},[e._v(e._s(t.likedBy.length)+" likes")]),s("img",{staticClass:"icon",attrs:{src:r("680d"),alt:"share",width:"20",height:"20"}})]),s("div",{staticClass:"describe"},[s("p",{staticStyle:{marginLeft:"10px",marginBottom:"10px",marginTop:"3px"}},[e._v(" "+e._s(t.caption)+" ")])])])])})),0),s("Load-com",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.loadshow,expression:"$store.state.loadshow"}]}),e.error?s("Error-com",{attrs:{errormessage:e.errormessage}}):e._e()],1)},a=[],n=(r("99af"),r("4de4"),r("4160"),r("caad"),r("ac1f"),r("2532"),r("5319"),r("159b"),r("96cf"),r("1da1")),o=r("8137"),i=r("f40f"),c={name:"Search",data:function(){return{error:!1,errormessage:"",cloudinaryURL:"https://res.cloudinary.com/hkeunji7l/",posts:[],from:0,to:10,isload:{num:0,loading:!1},unheart:"@/img/heart.svg",obj:{name:"axia",age:"000"}}},beforeCreate:function(){this.$store.state.loadshow=!0},created:function(){this.loaddata(),this.$store.commit("setLoading")},computed:{username:function(){return this.$store.state.username},token:function(){return this.$store.state.token}},mounted:function(){},methods:{loaddata:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o["b"])(e.$store.state.username,e.from,e.to);case 3:r=t.sent,r.forEach((function(t){t.heart=t.likedBy.includes(e.username),t.menu=!1})),console.log("OK",r),r.push({bot:!0}),e.posts=r,e.$nextTick((function(){e.initScroll();var t=new IntersectionObserver(e.loaddown);t.observe(document.querySelector(".loadmore"))})),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),e.errormessage=t.t0,e.error=!0;case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()},loaddown:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isload.num++,!(e.isload.num>1&&!e.isload.loading&&e.posts.length>=e.to-1)){t.next=21;break}return e.from+=10,e.to+=10,e.isload.loading=!0,t.prev=5,t.next=8,Object(o["b"])(e.$store.state.username,e.from,e.to);case 8:r=t.sent,r.forEach((function(t){t.heart=t.likedBy.includes(e.username)})),e.posts.pop(),r.push({bot:!0}),e.posts=e.posts.concat(r),e.$nextTick((function(){e.product&&e.product.refresh()})),e.isload.loading=!1,t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](5),e.errormessage=t.t0,e.error=!0;case 21:case"end":return t.stop()}}),t,null,[[5,17]])})))()},initScroll:function(){var e=this.$refs.product;this.product=new i["a"](e,{click:!0,mouseWheel:!0})},menu:function(e){e.menu=!e.menu},btnsub:function(e,t){var r=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,Object(o["a"])(e,t,r.$store.state.token);case 3:a=s.sent,"Authentication Failed."==a?(localStorage.clear(),r.$store.commit("setUser"),r.$router.replace({path:"/"})):(r.posts=r.posts.filter((function(e){return e.username!==t})),r.$nextTick((function(){r.product&&r.product.refresh()})),console.log(r.posts,t)),s.next=11;break;case 7:s.prev=7,s.t0=s["catch"](0),r.errormessage=s.t0,r.error=!0;case 11:case"end":return s.stop()}}),s,null,[[0,7]])})))()},like:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.heart){r.next=9;break}return e.heart=!e.heart,e.likedBy=e.likedBy.filter((function(e){return e!==t.username})),r.next=5,Object(o["e"])("post/unlike",e._id,t.token);case 5:s=r.sent,"Authentication Failed."===s&&(sessionStorage.clear(),t.$store.commit("setUser"),t.$router.replace({path:"/"})),r.next=15;break;case 9:return e.heart=!e.heart,e.likeBy=e.likedBy.push(t.username),r.next=13,Object(o["e"])("post/like",e._id,t.token);case 13:a=r.sent,"Authentication Failed."===a&&(sessionStorage.clear(),t.$store.commit("setUser"),t.$router.replace({path:"/"}));case 15:case"end":return r.stop()}}),r)})))()}}},u=c,l=(r("a293"),r("2877")),d=Object(l["a"])(u,s,a,!1,null,"3a4926f2",null);t["default"]=d.exports},a293:function(e,t,r){"use strict";r("b6f7")},b6f7:function(e,t,r){}}]);
//# sourceMappingURL=search.b9982408.js.map